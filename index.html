<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Rachel Care - Karácsony</title>
	
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,500;1,600;1,700;1,800&amp;family=Poppins:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&amp;display=swap" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css?v2232342">
	<!-- Meta Pixel Code -->
    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return;
            n = f.fbq = function () {
                n.callMethod ?
                    n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n;
            n.push = n;
            n.loaded = !0;
            n.version = '2.0';
            n.queue = [];
            t = b.createElement(e);
            t.async = !0;
            t.src = v;
            s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '591949012753276');
        fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
                   src="https://www.facebook.com/tr?id=591949012753276&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->
	
<!-- TikTok Pixel Code Start -->
<script>
!function (w, d, t) {
  w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie","holdConsent","revokeConsent","grantConsent"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(
var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var r="https://analytics.tiktok.com/i18n/pixel/events.js",o=n&&n.partner;ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=r,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};n=document.createElement("script")
;n.type="text/javascript",n.async=!0,n.src=r+"?sdkid="+e+"&lib="+t;e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)};


  ttq.load('CQ5RBKRC77UAOAV5F03G');
  ttq.page();
}(window, document, 'ttq');
</script>
<!-- TikTok Pixel Code End -->
	
</head>

<body>

<div class="support">
	Kérdésed van? Hívj minket: <a href="tel:+36708022937">06 70 802 2937</a>
</div>
<!-- Kosár popup -->
<div id="succes-cart">A termék kosárba rakva.</div>
<!-- Alert popup -->
<div id="alert-cart"></div>
	
<section class="header">
	<img src="img/heart.svg" class="heart">
	<div>
		<div>
			<img src="img/logo.png" class="logo">
			<h1>RACHEL CARE</h1>
			<h2>Természetes Fiatalosság Nőnapra</h2>
			<p>Lepd meg a szereted te is a Rachel Care különleges ünnepi csomagjával most díszdobozban. A természetes szépség fiatalosító erejével!</p>
			<a class="cta" style="margin: 0;" href="#kosar">Érdekel</a>
		</div>
		<img class="header-girl" src="img/header-girl.png">
	</div>	
</section>
	
<section class="hero1">
	<div>
		<img src="img/hero1.png">
		<div>
			<h3>Ünnepi ajánlatok csak most, limitált ideig!</h3>
			<p>Két különleges csomagunk közül választhatsz, hogy a lehető legjobban gondoskodhass bőröd fiatalosságáról!</p>
			<a class="cta" style="margin: 0;" href="#kosar">Érdekel</a>
		</div>
	</div>	
</section>
	
<section class="hero2" id="kosar">
	<div>	
		<h3>Rachel care nőnapi csomagok</h3>
		<p>Mindkét csomag díszdobozzal együtt érkezik. Ideális választás önmagadnak vagy ajándéknak szeretteidnek!</p>
		<div class="termekek">
			<div class="termek">
				<div class="termek-kep">
					<img src="img/termek3.png">
					<div class="tag">Limitált darabszám</div>
				</div>
				<div class="termek-nev">Klasszikus Kedvenc</div>
				<div class="termek-leiras">Nappali arckrém, Éjszakai arckrém, Szérum</div>
				<div class="termek-leiras">Ez a csomag már bizonyított! A tavalyi szezon kedvence, amit vásárlóink újra és újra választanak.</div>
				<div class="termek-gomb">
					<div class="termek-ar"><del>29 840 Ft</del><br>25 590 Ft</div>
					<button class="kosar-gomb" onclick="addToCart(246, 'Klasszikus Kedvenc', 25590, 'termek3.png')">Kosárba</button>
				</div>
			</div>

			<div class="termek">
				<div class="termek-kep">
					<img src="img/termek3-2.png">
					<div class="tag">Csak Nőnapra</div>
				</div>	
				<div class="termek-nev">Új Érkezés</div>
				<div class="termek-leiras">Nappali arckrém, Éjszakai arckrém, Szemkörnyékápoló</div>
				<div class="termek-leiras">Exkluzív, új összeállítás, ami csak a nőnapon érhető el! Lepd meg szereteidet vele!</div>
				<div class="termek-gomb">
					<div class="termek-ar"><del>34 470 Ft</del><br>29 300 Ft</div>
					<button class="kosar-gomb" onclick="addToCart(247, 'Új Érkezés', 29300, 'termek3-2.png')">Kosárba</button>
				</div>
			</div>
		</div>	
	</div>	
</section>		
	
<section class="hero3">
	<div>	
		<img src="img/ajandek.jpg">
		<div>
			<h3>Ne feledd: AZ UTOLSÓ RENDELÉSI NAP 2025. MÁRCIUS 06.</h3>
			<p>Bár mindent megteszünk, hogy a csomagod időben megérkezzen, a futárok túlterhelés miatt ajánljuk, hogy ne halogasd a rendelést!</p>
		</div>
	</div>	
</section>	
	
<section id="form" class="form">
		
		<h3>Megrendelés</h3>
		<p style="text-align: center;">Válassz a fenti ajánlatok közül, majd töltsd ki az űrlapot:</p>
		<div class="rendeles">

			<div class="kosar">
				<h4>Kosarad tartalma:</h4>
				<div id="kosarTermekek"></div>
				<div class="osszeg">Összesen: <span id="totalAmount">0 Ft</span></div>
				<div class="kosar-promo">Rendeld meg időben, és ajándékozz természetes fiatalosságot nőnapra!</div>
			</div>

			<div class="rendeles-form">
				
				
				
				<div id="theForm">
					<label>NÉV</label>
					<input type="text" name="name" id="name" required>
					<label>E-MAIL</label>
					<input type="text" name="email" id="email" required="">
					<label>TELEFON</label>
					<input type="text" name="phone" id="phone" required="">
                    <label style="display: block; margin: 20px 0 10px; font-weight: 600;">Számlázási cím</label>
					<div class="iranyitoszam">
						<label>ÍRÁNYÍTÓSZÁM</label>
						<input type="text" name="billing_zip" id="billing_zip" required="">
					</div>
					<div class="varos">
						<label>VÁROS</label>
						<input type="text" name="billing_city" id="billing_city" required="">
					</div>
					<label>CÍM</label>
					<input type="text" name="billing_address" id="billing_address" required="">
                   
				
                    <input type="checkbox" id="shippingCheck" onclick="shippingCheck()">
					<label>Másik címre kérem a szállítást</label> 

					<div id="shippingInputs" style="display: none; margin-top:20px;">
						<label style="display: block; margin: 20px 0 10px; font-weight: 600;">Szállítási cím</label>
						<div class="iranyitoszam">
							<label>ÍRÁNYÍTÓSZÁM</label>
                            <input type="text" name="shipping_zip" id="shipping_zip">
						</div>
						<div class="varos">
							<label>VÁROS</label>
							<input type="text" name="shipping_city" id="shipping_city">
						</div>
                        <label>CÍM</label>
						<input type="text" name="shipping_address" id="shipping_address">
					</div>
					<div>
						<label>MEGJEGYZÉS</label>
						<input type="text" name="message" id="message">
					</div>
                    <div class="radio-label">  
						<label onclick="updateTotalAmount()">
							<input type="radio" name="radio-payment" value="1" data-price="0" />
							<span>Utánvétel</span><!--<br><span class="szallitasi-koltseg">+1000 Ft</span>-->
						</label>
						<label onclick="updateTotalAmount()">
							<input type="radio" name="radio-payment" value="2" />
							<span>Banki átutalás</span>
						</label>
						<label onclick="updateTotalAmount()">
							<input type="radio" name="radio-payment" value="3" />
							<span>Bankkártya</span>
						</label>
					</div> 
					<div class="radio-label"> 
						<label onclick="updateTotalAmount()">
							<input type="radio" name="radio-shipping" value="Hazhozszallitas" data-price="0" />
							<span	>Házhozszállítás</span><!--<br><span class="szallitasi-koltseg">+1590 Ft</span>-->
						</label>
						<!--<label onclick="updateTotalAmount()">
							<input type="radio" name="radio-shipping" value="GLS" data-price="1490" />
							<span>GLS</span><br><span class="szallitasi-koltseg">+1490 Ft</span>
						</label>-->
						<label onclick="updateTotalAmount()">
							<input type="radio" name="radio-shipping" value="FOXPOST" data-price="0" />
							<span>Foxpost</span><!--<br><span class="szallitasi-koltseg">+1290 Ft</span>-->
						</label>
                    </div> 
					<iframe frameborder="0" loading="lazy" src="https://cdn.foxpost.hu/apt-finder/v1/app/" width="100%" height="600px" id="foxpost" style="display:none;"></iframe>
					<input type="hidden" name="data[fp_automata]" id="foxpostData">
				
                   
                    <p style="color:#0F2846; font-size: 12px; text-align: left;">A megrendelés elküldésével elfogadom az <a style="color:#0F2846;" href="https://rachelcare.hu/aszf.html" target="_blank">ÁSZF</a> és az <a style="color:#0F2846;" href="https://rachelcare.hu/adatkezeles.html" target="_blank">Adatkezelési tájékoztatóban</a> foglaltakat.</p>
                    <button class="rendeles-gomb" type="button" onclick="postData()">Megrendelés elküldése</button>
				</div>
			</div>     
	</div>
</section>
	
</body>
	
<script>
    var cart = [];
	var total = 0;

    function addToCart(id, name, price, image) {
		let cartItem = cart.find(item => item.id === id);
		if (cartItem) {
			console.log('Létező termék');
			cartItem.qty += 1;
		} else {
			cart.push({ id, name, price, qty: 1, image });
		}
		updateCartDisplay();
		cartPopup();
    }

	function cartPopup() {
		document.getElementById('succes-cart').classList.add('active');
		setTimeout(function () {
			document.getElementById('succes-cart').classList.remove('active');
		}, 3000);
	}

    function updateCartDisplay() {
        const cartItemsContainer = document.getElementById("kosarTermekek");
        cartItemsContainer.innerHTML = "";
        cart.forEach((item, index) => {
            const newDiv = document.createElement("div");
            newDiv.classList.add("kosar-termek");
            newDiv.innerHTML = `
                <div class="kosar-termekkep"><img src="img/${item.image}"></div>
                <div>
                    <div class="kosar-termeknev">${item.name}</div>
                    <div class="kosar-termekar">${new Intl.NumberFormat('hu-HU', { useGrouping: true }).format(item.price * item.qty)} Ft</div>
                    <div class="kosar-mennyiseg">
                        <button class="minus-btn" type="button" onclick="changeQuantity(${index}, -1)"><img src="img/square-minus-solid.svg"></button>
                        <input type="text" value="${item.qty}" class="quantity-input" readonly>
                        <button class="plus-btn" type="button" onclick="changeQuantity(${index}, 1)"><img src="img/square-plus-solid.svg"></button>
                    </div>
                </div>
                <button class="x-button" type="button" onclick="removeFromCart(${index})"><img src="img/circle-xmark-solid.svg"></button>
            `;
            cartItemsContainer.appendChild(newDiv);
        });
        updateTotalAmount();
    }

    function changeQuantity(index, change) {
        if (cart[index].qty + change > 0) {
            cart[index].qty += change;
        }
        updateCartDisplay();
    }

	function removeFromCart(index) {
		document.getElementById('kosarTermekek').children[index].classList.add('remove');
		let height = document.getElementById('kosarTermekek').children[index].clientHeight + 50;
		setTimeout(() => {
			for (let i = index+1; i < cart.length; i++) {
				document.getElementById('kosarTermekek').children[i].style.transform = 'translateY(-' + height + 'px)';
			}
		}, 200)
		setTimeout(() => {
			cart.splice(index, 1);
			updateCartDisplay();
		}, 500)
	}

	totalCount = 0;
	function updateTotalAmount() {
		const totalAmountElement = document.getElementById("totalAmount");
		const shippingPrice = $('input[name="radio-shipping"]:checked').data('price') || 0;
		const paymentPrice = $('input[name="radio-payment"]:checked').data('price') || 0;
		total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
		total += shippingPrice + paymentPrice;
		if(totalCount != total) {
			totalCount = 0;
			let intervalId = setInterval(() => {
				totalCount += total / 30;
				totalAmountElement.textContent = `${new Intl.NumberFormat('hu-HU', {useGrouping: true}).format(Math.round(totalCount))} Ft`;
				if (totalCount >= total) {
					clearInterval(intervalId);
					totalCount = total;
					totalAmountElement.textContent = `${new Intl.NumberFormat('hu-HU', {useGrouping: true}).format(total)} Ft`;
				}
			}, 10)
		}
		console.log(total);
	}

    function postData() {

		function alertPopup(message) {
			document.getElementById('alert-cart').innerHTML = message;
			document.getElementById('alert-cart').classList.add('active');
			setTimeout(function () {
				document.getElementById('alert-cart').classList.remove('active');
			}, 3000);
		}

		if (cart.length === 0) {
			alertPopup('A kosár üres!');
			return;
		}
		for (let i = 0; i < document.querySelectorAll('#theForm input').length; i++) {
			if (!document.querySelectorAll('#theForm input')[i].reportValidity()) return
		}
        if (!document.querySelector('input[name="radio-payment"]:checked')) {
			alertPopup('Kérlek válassz a fizetési módok közül!');
            return;
        }
        if (!document.querySelector('input[name="radio-shipping"]:checked')) {
			alertPopup('Kérlek válassz a szállítási módok közül!');
            return;
        }
        if (document.querySelector('input[name="radio-shipping"]:checked').value === 'FOXPOST' && document.getElementById('foxpostData').value === '') {
			alertPopup('Kérlek válassz ki egy automatát a listából!');
            return;
        }

        let product_ids = [];
        let product_qtys = [];
        cart.forEach((item) => {
            product_ids.push(item.id);
            product_qtys.push(item.qty);
        });

        if (document.querySelector('input[name="radio-shipping"]:checked').value === 'Hazhozszallitas') {
            product_ids.push(131);
            product_qtys.push(1);
        } else if (document.querySelector('input[name="radio-shipping"]:checked').value === 'GLS') {
            product_ids.push(242);
            product_qtys.push(1);
        } else if (document.querySelector('input[name="radio-shipping"]:checked').value === 'FOXPOST') {
            product_ids.push(130);
            product_qtys.push(1);
        }

        /*if (document.querySelector('input[name="radio-payment"]:checked').value === '1') {
            product_ids.push(244);
            product_qtys.push(1);
        }*/


		async function sendData() {
			let adat =
					{
						name: document.getElementById("name").value,
						email: document.getElementById("email").value,
						phone: document.getElementById("phone").value,
						billing_zip: document.getElementById("billing_zip").value,
						billing_city: document.getElementById("billing_city").value,
						billing_address: document.getElementById("billing_address").value,
						shipping_zip: document.getElementById("shipping_zip").value,
						shipping_city: document.getElementById("shipping_city").value,
						shipping_address: document.getElementById("shipping_address").value,
						payment_method_id: document.querySelector('input[name="radio-payment"]:checked').value,
						product_id: product_ids,
						product_qty: product_qtys,
						comment: document.getElementById('message').value,
						data:
								{
									foxpost_automata: document.getElementById('foxpostData').value,
								},
						//success_return_url: 'https://rachelcare.hu/koszonjuk.html'
					};

			try {
				let response = await fetch('https://epikforge.space/api/site/4838e565-5ba9-48cf-9f4c-18bef5992b6e/order/create', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify(adat)
				});

				if (!response.ok) {
					throw new Error('Hálózati hiba történt: ' + response.status);
				}

				let data = await response.json();
				console.log('Sikeres válasz:', data);

				fbq('track', 'Purchase', {
					value: total,
					currency: 'HUF',
				});

				if (data.redirect && typeof data.redirect === 'string') {
					window.location = data.redirect;
				}
				//Sikeres rendelés
				if(data.success){
					document.getElementById('form').style.opacity = '0';
					setTimeout(()=>{
						while (document.getElementById('form').firstChild) {
							document.getElementById('form').removeChild(document.getElementById('form').firstChild);
						}
						document.getElementById('form').innerHTML = `
                            <h3>Sikeres rendelés!</h3>
                            <button class="rendeles-gomb" type="button" onclick="location.reload();">Új rendelés leadása</button>
                        `;
						document.getElementById('form').style.height = '500px';
						document.getElementById('form').style.opacity = '1';
					}, 500)
				}

			} catch (error) {
				console.error('Hiba:', error.message);
			}
		}

		sendData();
    }
</script>
	
<script>
    function shippingCheck() {
        if (document.getElementById("shippingCheck").checked == true) {
			document.getElementById("shippingInputs").style.display = "block";
        } else {
			document.getElementById("shippingInputs").style.display = "none";
        }
    }
</script>
<script>
    //Foxpost
    function receiveMessage(event) {
        if (event.origin !== 'https://cdn.foxpost.hu') { return; }
        try {
            var apt = JSON.parse(event.data);
			console.log(apt);
            document.getElementById('foxpostData').value = apt.operator_id;
        } catch (error) {
            console.error('Hibás üzenet formátum:', error);
        }
    }

    window.addEventListener('message', receiveMessage, false);

    document.querySelectorAll('input[name="radio-shipping"]').forEach(function (input) {
        input.addEventListener('change', function () {
            if (this.value === 'FOXPOST') {
                document.getElementById('foxpost').style.display = 'block';
            } else {
                document.getElementById('foxpost').style.display = 'none';
                document.getElementById('foxpostData').value = '';
            }
        });
    });
</script>

</html>
